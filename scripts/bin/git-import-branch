#!/usr/bin/env zsh
# Open all files with jshint errors in vim
# When work is done on a feature branch, we squash all commits in one and merge
# it in master. Then, we delete the feature branch.

local branch=$1
local currentCommit="$(git rev-parse HEAD)"
local allCommitMessages="$(git log --pretty=format:'%s' $currentCommit..$branch)"
echo $allCommitMessages

# Squash all commits into one, but do not commit yet
git merge --squash $branch &>/dev/null
# Commit with a message being the full list of commits
git commit -v -m "Merging of branch $branch

$allCommitMessages" --edit
