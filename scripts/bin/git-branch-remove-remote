#!/usr/bin/env zsh
# Usage:
# $ git branch-remove-remote (origin) foo
# $ git branch-remove-remote upstream foo
# $ git branch-remove-remote foo upstream

local branchName=$1
local remoteName=$2

# The branch name is required
if [[ $# = 0 ]]; then
  echo "âœ˜ You must pass at least the branch to delete"
  exit 1
fi

# Only a branch name ? We remove on the current remote
if [[ $# = 1 ]]; then
  remoteName="$(git remote-current)"
fi

# Specifying the remote
if [[ $# = 2 ]]; then
  # Swapping them if remote is not a remote
  if ! git-remote-exists $remoteName; then
    local tmp
    tmp=$remoteName
    remoteName=$branchName
    branchName=$tmp
  fi
fi

git push $remoteName --delete $branchName
