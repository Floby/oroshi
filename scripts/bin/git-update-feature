#!/usr/bin/env zsh
# When issued in a feature branch, will merge (squash) the develop branch to
# keep the feature up to date with the develop branch.

local currentBranch=$(git current-branch)
local target_branch=$1
if [[ $target_branch == "" ]]; then
	target_branch="develop";
fi

if [[ ! $currentBranch =~ '^feature/' ]]; then
	echo "You are not in a feature/ branch"
	exit
fi

git merge --squash $target_branch
git commit -m "Merge (squash) branch '$target_branch'"
