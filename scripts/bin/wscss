#!/usr/bin/env ruby
# Encoding : UTF-8
require "shellwords"
# Watch selected directory or file

class Wscss
  def initialize(*args)
    if args.size==0
      @target = File.expand_path(".")
    else
      @target = args[0]
    end

    unless File.exists?(@target)
      puts "#{@target} does not exist"
      exit
    end

    if !File.directory?(@target)
      puts "Please specify a directory"
      exit
    end

  end
  def run
    options = [
      "--cache-location /tmp/sass-cache",
      "--unix-newlines",
      "--style compact",
      "--scss",
      "-E utf-8",
      "--watch #{@target.shellescape}"
    ]
    system "sass #{options.join(' ')}"
  end
end
Wscss.new(*ARGV).run()
